"use strict";var ClientCache;!function(e){function t(e,t){return new n(e,t)}var n=function(){function e(e,t){this.$q=e,this.$cacheFactory=t,this.options={storagePrefix:"client-cache",useCompression:!1},this.sessionCache=t(this.options.storagePrefix)}return e.prototype.set=function(e,t){if(angular.isUndefined(e)||null===e)throw new Error("Argument null exception. Parameter name: key. Function called: set");if(angular.isUndefined(t)||null===t)throw new Error("Argument null exception. Parameter name: value. Function called: set");e=this.prefix(e);var n=t;(angular.isObject(n)||angular.isArray(n)||angular.isNumber(+n||n))&&(n=angular.toJson(t)),this.sessionCache.put(e,n);var r=this.overrideCacheItem(e,n);r&&(this.options.useCompression&&(n=LZString.compress(n)),localStorage.setItem(e,n))},e.prototype.get=function(e){if(angular.isUndefined(e)||null===e)throw new Error("Argument null exception. Parameter name: key. Function called: get");e=this.prefix(e);var t=this.sessionCache.get(e);return angular.isUndefined(t)||null===t?(t=localStorage.getItem(e),angular.isUndefined(t)||null===t?void 0:(this.options.useCompression&&(t=LZString.decompress(t)),this.parse(t))):this.parse(t)},e.prototype.tryGetSet=function(e,t,n){var r=this,i=this.$q.defer();e=this.prefix(e);var o=this.sessionCache.get(e);return angular.isUndefined(o)||null===o?t().then(function(t){return r.set(e,t),angular.isUndefined(n)||null===n||(t=n(t)),t},function(){var t=r.get(e);return angular.isUndefined(n)||null===n||(t=n(t)),t}):(this.set(e,o),o=this.parse(o),angular.isUndefined(n)||null===n||(o=n(o)),i.resolve(o),i.promise)},e.prototype.configure=function(e){angular.extend(this.options,e),angular.isDefined(e.storagePrefix)&&null!==e.storagePrefix&&(this.sessionCache.destroy(),this.sessionCache=this.$cacheFactory(e.storagePrefix))},e.prototype.removeAll=function(){localStorage.clear(),this.sessionCache.removeAll()},e.prototype.remove=function(e){e=this.prefix(e),localStorage.removeItem(e),this.sessionCache.remove(e)},e.prototype.parse=function(e){var t;try{t=angular.fromJson(e)}catch(n){t=e}return t},e.prototype.overrideCacheItem=function(e,t){var n=localStorage.getItem(this.prefix(e));if(angular.isUndefined(n)||null===n)return!0;this.options.useCompression&&(n=LZString.decompress(n));var r=this.hash(n),i=this.hash(t);return r!==i},e.prototype.prefix=function(e){return this.options.storagePrefix+"."+e},e.prototype.hash=function(e){var t,n,r,i=0;if(0===e.length)return i;for(t=0,r=e.length;r>t;t++)n=e.charCodeAt(t),i=(i<<5)-i+n,i|=0;return i},e}();e.ClientCacheService=n,t.$inject=["$q","$cacheFactory"],angular.module("ClientCache",[]),angular.module("ClientCache").factory("ClientCacheService",t)}(ClientCache||(ClientCache={}));
