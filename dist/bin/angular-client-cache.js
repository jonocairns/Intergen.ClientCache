"use strict";var ClientCache;!function(e){function t(e,t){return new r(e,t)}!function(e){e[e.Local=0]="Local",e[e.Session=1]="Session",e[e.All=2]="All"}(e.StorageType||(e.StorageType={}));var r=(e.StorageType,function(){function e(e,t){this.$q=e,this.$timeout=t,this.options={storagePrefix:"angular-cache",useCompression:!1,storageType:2}}return e.prototype.set=function(e,t,r){var o=this;if(angular.isUndefined(e))throw new Error("Argument null exception. Parameter name: key. Function called: set");if(angular.isUndefined(t))throw new Error("Argument null exception. Parameter name: value. Function called: set");var n=t,a=this.$q.defer();return(angular.isObject(n)||angular.isArray(n)||angular.isNumber(+n||n))&&(n=angular.toJson(t)),this.$timeout(function(){var t=o.overrideCacheItem(e,n,o.resolveStorageType(r));t&&(o.options.useCompression&&(n=LZString.compress(n)),o.store(e,n,o.resolveStorageType(r))),a.resolve()}),a.promise},e.prototype.get=function(e,t){if(angular.isUndefined(e))throw new Error("Argument null exception. Parameter name: key. Function called: get");var r=this.retrieve(e,this.resolveStorageType(t));if(angular.isUndefined(r)||null===r)return void 0;this.options.useCompression&&(r=LZString.decompress(r));var o;try{o=angular.fromJson(r)}catch(n){o=r}return o},e.prototype.tryGetSet=function(e,t,r){var o=this,n=this.$q.defer(),a=this.get(e,2);return angular.isUndefined(a)||null===a?t().then(function(t){return angular.isUndefined(r)||null===r||(t=r(t)),o.set(e,t),t}):(angular.isUndefined(r)||null===r||(a=r(a)),n.resolve(a),n.promise)},e.prototype.configure=function(e){angular.extend(this.options,e)},e.prototype.removeAll=function(e){switch(e=this.resolveStorageType(e)){case 0:localStorage.clear();break;case 1:sessionStorage.clear();break;default:sessionStorage.clear(),localStorage.clear()}},e.prototype.remove=function(e,t){switch(e=this.prefix(e),t=this.resolveStorageType(t)){case 0:localStorage.removeItem(e);break;case 1:sessionStorage.removeItem(e);break;default:sessionStorage.removeItem(e),localStorage.removeItem(e)}},e.prototype.resolveStorageType=function(e){return angular.isUndefined(e)?this.options.storageType:e},e.prototype.overrideCacheItem=function(e,t,r){var o=this.retrieve(e,r);if(angular.isUndefined(o)||null===o)return!0;this.options.useCompression&&(o=LZString.decompress(o));var n=this.hash(o),a=this.hash(t);return n!==a},e.prototype.retrieve=function(e,t){switch(e=this.prefix(e),t){case 0:return localStorage.getItem(e);case 1:return sessionStorage.getItem(e);default:var r=sessionStorage.getItem(e);return angular.isUndefined(sessionStorage)?localStorage.getItem(e):r}},e.prototype.store=function(e,t,r){switch(e=this.prefix(e),r){case 0:localStorage.setItem(e,t);break;case 1:sessionStorage.setItem(e,t);break;default:localStorage.setItem(e,t),sessionStorage.setItem(e,t)}},e.prototype.prefix=function(e){return this.options.storagePrefix+"."+e},e.prototype.hash=function(e){var t,r,o,n=0;if(0===e.length)return n;for(t=0,o=e.length;o>t;t++)r=e.charCodeAt(t),n=(n<<5)-n+r,n|=0;return n},e}());e.ClientCacheService=r,t.$inject=["$q","$timeout"],angular.module("ClientCache",[]),angular.module("ClientCache").factory("ClientCacheService",t)}(ClientCache||(ClientCache={}));